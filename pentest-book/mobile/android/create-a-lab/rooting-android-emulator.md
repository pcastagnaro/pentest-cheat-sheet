# Rooting Android Emulator

## **Requirements**:

* Android Studio Installed
* An Android Emulator running (for this tutorial version 5.1 -API 21-)
* SuperSU Mobile app (chainfire)
  * [Google Play Store](https://play.google.com/store/apps/details?id=eu.chainfire.supersu)
  * [Direct Download](https://supersuroot.org/download/) (called SuperSU APK)
* Recovery **flashable.zip**
  * [Direct Download](https://supersuroot.org/download/) (called SuperSU ZIP)
  * [Alternative backup](https://androidfilehost.com/?w=files\&flid=154643) provided by XDA user [Ibuprophen](https://forum.xda-developers.com/member.php?u=4828250)

## **Instructions**

### **Install the SuperSu.apk**

* Install the SuperSu app firstly.
  * You can do it from the device from [Google Play Store](https://play.google.com/store/apps/details?id=eu.chainfire.supersu), or
  * Sideload through adb i.e `adb -e install supersu.apk`
* After installing it, when you run it shows a screen as shown below indicating "There is no SU binary installed..". This error just confirms the device is not yet rooted.

### **Make emulatorâ€™ system partition writable**

* As it suggests, we need to give the emulator permission to write system files.
* List the emulators installed on your PC `emulator -list-avds`

![Emulator list](<../../../../.gitbook/assets/image (62).png>)

* Navigate to the **tools** folder where Android SDK is installed and open command prompt there.
  * On Mac OS: `~/Library/Android/sdk/emulator`
* Type the following code to accomplish this: `emulator -avd {emulator_name} -writable-system`

![](<../../../../.gitbook/assets/image (38).png>)

### **Pushing su binary in system directory**

* Extract the Recovery **flashable.zip** (containing the su binaries of different architectures)

{% hint style="danger" %}
Important! Only use the su binary that matches your AVD architecture e.g x86, arm etc.., and note the path where you extracted these binaries.
{% endhint %}

![](<../../../../.gitbook/assets/image (59).png>)

* Make sure you are running adb as root and also you need to remount. Just enter these codes

```
adb root
adb remount
```

![](<../../../../.gitbook/assets/image (64).png>)

* Now its time to push the su binary:

![](<../../../../.gitbook/assets/image (20).png>)

`adb -e push adb -e push UPDATE-SuperSU-v2.82-20170528234214/x64/su /system/xbin/su`

{% hint style="info" %}
Nevermind about my specific location of su binary, any location is okay as long there is no white space
{% endhint %}

{% hint style="warning" %}
To figure out **bin** or **xbin** do in console before:

`adb shell`\
`ls /system/xbin/su`
{% endhint %}

{% hint style="info" %}
For emulators running android 5.1 and below use the `su` and not `su.pie`
{% endhint %}

### **Change permissions of the su binary**

* Next let's do a bit of modification of the permissions of su binary. We have to do this in emulator device through adb:

```
adb -e shell su root cd /system/xbin chmod 06755 su
```

![](<../../../../.gitbook/assets/image (57).png>)

{% hint style="warning" %}
Take note of su binary path (mine is `/system/xbin`)
{% endhint %}

* Setting the `install` directive on su binary and set a `daemon`

```
su --install
su --daemon&
```

![](<../../../../.gitbook/assets/image (2).png>)

### **Setting SELinux to Permissive (i.e turning off SE Linux)**

* Finally turn off selinux through this code: `setenforce 0`
* Open SuperSU app on the Mobile emulator and it may ask to update binaries, you can use Normal method.

![](<../../../../.gitbook/assets/image (6).png>)

{% hint style="info" %}
If you're experiencing bootloops, rather don't update the binaries, just use it as it is.
{% endhint %}

### Now you have an emulator with root!

![](<../../../../.gitbook/assets/image (9).png>)
