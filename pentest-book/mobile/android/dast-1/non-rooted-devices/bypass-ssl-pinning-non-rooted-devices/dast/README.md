# Instrumentation with Frida and Objection

## Patch APK with Objection

This is an alternative to **non-rooted devices** which **don't have Frida Server running**.

`ptrace` canâ€™t be used as a normal user. To address this constraint, Frida provides another mode of operation called embedded. In this mode the user is responsible to inject the frida-gadget library.

**Moreover, there are some situations that is not possible to have a rooted phone but still you need to use Frida.**

{% hint style="warning" %}
You should have frida and frida-tools installed.

You should have the [Android SDK](https://guides.codepath.com/android/installing-android-sdk-tools) installed
{% endhint %}

### **Patching APK**

{% hint style="info" %}
More info: [https://blog.netspi.com/four-ways-bypass-android-ssl-verification-certificate-pinning](https://blog.netspi.com/four-ways-bypass-android-ssl-verification-certificate-pinning)
{% endhint %}

```
<CONNECT THE DEVICE TO ADB>
objection patchapk -s test_app.apk
```

{% hint style="warning" %}
Remember to connect the cell phone and have the ADB running. If you have another device, **objection** could take this device and set the architecture for that.
{% endhint %}

![](<../../../../../../../.gitbook/assets/image (24).png>)

### Install Patched APK (with ADB)

Then install the patched application.

```
adb install test_app.objection.apk
```

{% hint style="info" %}
Use the `-r` parameter if you are reinstalling the app.

Use the `-s <DEVICE_ID>` if you have multiple devices connected to your PC
{% endhint %}
