---
description: From https://github.com/0xFireball/root_avd/
---

# Rooting the Android Studio AVDs

A quick guide on how to root Android Studio's Android AVDs (and required files!)

Required files can be found in this repository: [https://github.com/0xFireball/root\_avd](https://github.com/0xFireball/root\_avd)

You need the Android SDK and fresh new AVD. For this guide we will call it `RootAVD`.

This was written and tested on a Nexus 5X AVD running Android 7.1 Nougat on an Ubuntu Linux host. This method _should_ work with a similar setup (Android Nougat) for the forseeable future, though future Android versions may complicate this process further.

1.) Start emulator `$SDK_PATH/emulator/emulator` with args `-avd RootAVD -writable-system -selinux disabled -qemu -enable-kvm`

{% tabs %}
{% tab title="Windows" %}
{% code overflow="wrap" lineNumbers="true" %}
```bash
C:\Users\<USER>\AppData\Local\Android\Sdk\emulator\emulator -avd RootAPI27 -writable-system -selinux disabled -qemu
```
{% endcode %}
{% endtab %}

{% tab title="MacOS" %}
{% code overflow="wrap" lineNumbers="true" %}
```bash
~/Library/Android/sdk/emulator/emulator -avd RootAPI27 -writable-system
```
{% endcode %}
{% endtab %}
{% endtabs %}

{% hint style="info" %}
`RootAPI27` is the AVD name you had created

![](<../../../../.gitbook/assets/image (21).png>)
{% endhint %}

<figure><img src="../../../../.gitbook/assets/image (36).png" alt=""><figcaption></figcaption></figure>

2.) Wait for boot

3.) Restart `adbd` as root and remount system as writable:

```
adb root
adb remount
```

<figure><img src="../../../../.gitbook/assets/image (40).png" alt=""><figcaption></figcaption></figure>

4.) Install `Superuser.apk`:

`adb install SuperSU/common/Superuser.apk`

5.) Push `su` and update permissions: you will have to pick the corresponding architecture `$ARCH`. `adb push SuperSU/$ARCH/su /system/xbin/su`, then update permissions: `adb shell chmod 0755 /system/xbin/su`

{% tabs %}
{% tab title="Windows" %}
{% code overflow="wrap" lineNumbers="true" %}
```bash
adb push <LOCAL PATH>\su /system/xbin/su

# update permissions
adb shell chmod 0755 /system/xbin/su
```
{% endcode %}
{% endtab %}

{% tab title="MacOS" %}
{% code overflow="wrap" lineNumbers="true" %}
```bash
adb push <LOCAL PATH>/su /system/xbin/su

# update permissions
adb shell chmod 0755 /system/xbin/su
```
{% endcode %}
{% endtab %}
{% endtabs %}

6.) Enter into `adb` shell: `adb shell`

{% tabs %}
{% tab title="ADB Shell" %}
{% code overflow="wrap" lineNumbers="true" %}
```bash
#Set SELinux Permissive
setenforce 0

#Install SuperSU's su to system
su --install

#Run SuperSU's su as daemon
su --daemon&

#Exit adb shell
exit
```
{% endcode %}
{% endtab %}
{% endtabs %}

7.) Install [Superuser.apk](https://github.com/0xFireball/root\_avd/blob/master/SuperSU/common/Superuser.apk) application

```bash
adb install .\Superuser.apk
```

8.) Finally, open the SuperSU app on the device, and it will tell you the `su` binary needs to be updated. Accept and use normal installation.

Installation will fail. Don't reboot, just move on. It will still work.

9.) Congratulations! You now have a rooted AVD with SuperSU.

<figure><img src="../../../../.gitbook/assets/image (22).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../../.gitbook/assets/image (39).png" alt=""><figcaption></figcaption></figure>

**TIP: Superuser may not always persist after reboot, to fix:**

1. From a root shell, start `su --daemon&`
2. Root should now work.
3. Optional: Look for the temporary emulator system image; you can back this up and use it as a patched system.
