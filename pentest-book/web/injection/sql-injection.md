# SQL Injection

## SQLmap

### Automated sqlmap scan

{% code overflow="wrap" lineNumbers="true" fullWidth="false" %}
```bash
sqlmap -u http://site.com --forms --batch --crawl=2 --cookie= --level=5 --risk=3
```
{% endcode %}

### Load HTTP request from a file

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -r <REQUEST FILE> --proxy http://127.0.0.1:8080 --level=5 --risk=3 -v 3 --force-ssl -f --random-agent -a
```
{% endcode %}

### Logging Scans

When using `sqlmap`, you can save logs and output to files for later review. Here's how you can do it:

#### 1. **Basic Output to a Log File**

By default, `sqlmap` stores its logs in the current directory under the `.sqlmap` directory. If you want to specify a particular output directory or log file, you can use the `-o` or `--output-dir` options:

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -u "<http://example.com/vulnerable_page.php?id=1>" --output-dir=/path/to/output_directory
```
{% endcode %}

This will store all the results in the specified directory.

#### 2. **Saving Command Output to a File**

You can redirect the terminal output to a file using standard shell redirection:

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -u "<http://example.com/vulnerable_page.php?id=1>" | tee output.log
```
{% endcode %}

This command will display the output in the terminal and save it to `output.log` at the same time.

#### 3. **Verbose Output**

To increase the verbosity of the logs, use the `-v` option. You can specify levels from 0 to 6:

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -u "<http://example.com/vulnerable_page.php?id=1>" -v 3 | tee output.log
```
{% endcode %}

#### 4. **Saving Data to a Custom File**

To save the results to a specific file (for example, `output.txt`), you can use:

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -u "<http://example.com/vulnerable_page.php?id=1>" --batch --output-dir=/path/to/output_directory --output-format=txt > output.txt
```
{% endcode %}

This command will save the results in the `output.txt` file.

#### 5. **Automatically Store HTTP Traffic**

If you want to store all HTTP traffic during the scan, use the `--traffic-file` option:

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -u "<http://example.com/vulnerable_page.php?id=1>" --traffic-file=traffic.txt
```
{% endcode %}

This will save all the HTTP requests and responses to `traffic.txt`.

#### 6. **Storing Session**

You can store a session for future use with the `-s` or `--session` option:

{% code overflow="wrap" lineNumbers="true" %}
```bash
sqlmap -u "<http://example.com/vulnerable_page.php?id=1>" --session=session_file
```
{% endcode %}

This will store the session in `session_file`, which can be reused in future commands.

By using these methods, you can ensure that all your `sqlmap` activities are properly logged and saved for later analysis.
